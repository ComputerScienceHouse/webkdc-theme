# Makefile for Webauth utilities
# $Id$

srcdir		= @srcdir@
top_srcdir	= @top_srcdir@
top_builddir	= @top_builddir@
VPATH		= @srcdir@

CC		= @CC@
INSTALL		= @INSTALL@
LIBTOOL		= $(top_builddir)libtool
RANLIB		= @RANLIB@

CFLAGS		= @CFLAGS@

CPPFLAGS	= -I$(top_builddir) -I$(top_srcdir)/src/libwebauth \
		  @CPPFLAGS@ @CRYPTO_CPPFLAGS@ @KRB5_CPPFLAGS@

LDFLAGS		= -L$(top_builddir)src/libwebauth
LDLIBS		= -lwebauth @CRYPTO_LIBS@ @KRB5_LIBS@ @LIBS@

PROGS		= wa_keyring

all: $(PROGS)

wa_keyring: wa_keyring.o
	$(LIBTOOL) --mode=link $(CC) $(LDFLAGS) -o $@ wa_keyring.o $(LDLIBS)

clean:
	rm -rf $(PROGS) *.o .libs *~ core \#*

depend:
	$(top_srcdir)/tools/makedepend '$(CPPFLAGS)' *.c

# DO NOT DELETE THIS LINE -- make depend depends on it.
wa_keyring.o: wa_keyring.c $(top_srcdir)/src/libwebauth/webauth.h
