# Makefile for webkdc module
# $Id$

srcdir		= @srcdir@
top_srcdir	= @top_srcdir@
top_builddir	= @top_builddir@
VPATH		= @srcdir@

APXS		= @APXS@

APXS_CFLAGS	= @APXS_CFLAGS@
CPPFLAGS	= -I$(top_srcdir)/src/libwebauth @CPPFLAGS@ \
		  @CURL_CPPFLAGS@ @SSL_CPPFLAGS@ @KRB5_CPPFLAGS@
LDFLAGS		= @LDFLAGS@
LDLIBS		= $(top_builddir)src/libwebauth/libwebauth.la \
		  @CURL_LIBS@ @SSL_LIBS@ @KRB5_LIBS@ @LIBS@

SOURCES		= mod_webkdc.c util.c acl.c

.PHONY: all clean install install-webkdc

all: mod_webkdc.o

mod_webkdc.o: $(SOURCES) mod_webkdc.h
	$(APXS) -c $(APXS_CFLAGS) $(CPPFLAGS) $(LDFLAGS) $(LDLIBS) $(SOURCES)

# install does nothing, since normally people don't want to install this
# module.  Only install on make install-webkdc.
install:

install-webkdc:
	$(APXS) -i mod_webkdc.la

clean:
	rm -rf *.o *.la *.lo *.slo .libs *~ core \#*
