# Makefile for WebKDC installation
# $Id$

srcdir 		= @srcdir@
top_srcdir	= @top_srcdir@
VPATH		= @srcdir@

APACHE_ROOT	= @APACHE_ROOT@
D		= $(DESTDIR)

INSTALL		= @INSTALL@
INSTALL_DATA	= @INSTALL_DATA@
INSTALL_SCRIPT	= @INSTALL_SCRIPT@

@SET_MAKE@

.PHONY: all clean depend install

all clean depend:

install:
	$(INSTALL) -d $D$(APACHE_ROOT)/webkdc
	$(INSTALL) -d $D$(APACHE_ROOT)/webkdc/WebKDC
	$(INSTALL) -d $D$(APACHE_ROOT)/webkdc/images
	$(INSTALL) -d $D$(APACHE_ROOT)/webkdc/templates
	$(INSTALL_SCRIPT) login.fcgi $D$(APACHE_ROOT)/webkdc/login.fcgi
	$(INSTALL_SCRIPT) logout.fcgi $D$(APACHE_ROOT)/webkdc/logout.fcgi
	$(INSTALL_DATA) WebKDC.pm $D$(APACHE_ROOT)/webkdc/WebKDC.pm
	for f in images/*.gif ; do \
	    $(INSTALL_DATA) $$f $D$(APACHE_ROOT)/webkdc/$$f; \
	done
	for f in WebKDC/*.pm ; do \
	    $(INSTALL_DATA) $$f $D$(APACHE_ROOT)/webkdc/$$f; \
	done
	for f in templates/*.html templates/*.tmpl ; do \
	    $(INSTALL_DATA) $$f $D$(APACHE_ROOT)/webkdc/$$f; \
	done
