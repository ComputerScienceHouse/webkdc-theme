# Makefile for the webauth software
# $Id$

srcdir = @srcdir@
top_srcdir = @top_srcdir@
VPATH = @srcdir@

@SET_MAKE@

SUBDIRS = src tests

.PHONY: all clean install doc docs distclean

all: Makefile 
	@for subdir in $(SUBDIRS); do \
	    echo "making $@ in $$subdir"; \
	    ( cd $$subdir && $(MAKE) $@ ) || exit 1; \
	done

clean install:
	@for subdir in $(SUBDIRS); do \
	    echo "making $@ in $$subdir"; \
	    ( cd $$subdir && $(MAKE) $@ ) || exit 1; \
	done

doc docs:
	doxygen doc/doxygen.cfg

distclean: clean
	rm -rf config.status config.cache config.log autom4te.cache \
               src/common/include/conf.h Makefile \
               src/Makefile src/libwebauth/Makefile src/utils/Makefile\
               tests/Makefile tests/libwebauth/Makefile \
               *~ core \#*
